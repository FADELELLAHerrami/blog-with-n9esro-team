var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};var n={exports:t};(function(){n?n.exports=LRUCache:(this||e).LRUCache=LRUCache;function hOP(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function naiveLength(){return 1}function LRUCache(t,n,r){if(!((this||e)instanceof LRUCache))return new LRUCache(t,n);"function"!==typeof n&&(n=naiveLength);t&&"number"===typeof t&&!(t<=0)||(t=Infinity);var u={},i={},l=0,f=0,o=0,a=0;Object.defineProperty(this||e,"maxLength",{set:function(e){e&&"number"===typeof e&&!(e<=0)||(e=Infinity);t=e;o>t&&trim()},get:function(){return t},enumerable:true});Object.defineProperty(this||e,"lengthCalculator",{set:function(e){if("function"!==typeof e){n=naiveLength;o=a;Object.keys(u).forEach((function(e){u[e].length=1}))}else{n=e;o=0;Object.keys(u).forEach((function(e){u[e].length=n(u[e].value);o+=u[e].length}))}o>t&&trim()},get:function(){return n},enumerable:true});Object.defineProperty(this||e,"length",{get:function(){return o},enumerable:true});Object.defineProperty(this||e,"itemCount",{get:function(){return a},enumerable:true});(this||e).reset=function(){u={};i={};l=0;f=0;o=0;a=0};(this||e).dump=function(){return u};(this||e).set=function(e,l){if(hOP(u,e)){this.get(e);u[e].value=l;return true}var h={key:e,value:l,lu:f++,length:n(l)};r&&(h.now=Date.now());if(h.length>t)return false;o+=h.length;i[h.lu]=u[e]=h;a++;o>t&&trim();return true};(this||e).get=function(e){if(hOP(u,e)){var t=u[e];if(!(r&&Date.now()-t.now>r)){delete i[t.lu];t.lu===l&&lruWalk();t.lu=f++;i[t.lu]=t;return t.value}this.del(e)}};(this||e).del=function(e){if(hOP(u,e)){var t=u[e];delete u[e];delete i[t.lu];t.lu===l&&lruWalk();o-=t.length;a--}};function lruWalk(){l=Object.keys(i)[0]}function trim(){if(!(o<=t)){var e=Object.keys(i);for(var n=0;n<e.length&&o>t;n++){o-=i[e[n]].length;delete u[i[e[n]].key];delete i[e[n]]}lruWalk()}}}})();var r=n.exports;export default r;

