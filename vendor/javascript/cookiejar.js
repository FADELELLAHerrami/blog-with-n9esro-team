var t,e,i;var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var n={};n.CookieAccessInfo=o.CookieAccessInfo=t=function CookieAccessInfo(t,e,i,n){if((this||o)instanceof CookieAccessInfo){(this||o).domain=t||void 0;(this||o).path=e||"/";(this||o).secure=!!i;(this||o).script=!!n;return this||o}return new CookieAccessInfo(t,e,i,n)};n.Cookie=o.Cookie=e=function Cookie(t){if(t instanceof Cookie)return t;if((this||o)instanceof Cookie){(this||o).name=null;(this||o).value=null;(this||o).expiration_date=Infinity;(this||o).path="/";(this||o).domain=null;(this||o).secure=false;(this||o).noscript=false;t&&this.parse(t);return this||o}return new Cookie(t)};e.prototype.toString=function toString(){var t=[(this||o).name+"="+(this||o).value];Infinity!==(this||o).expiration_date&&t.push("expires="+new Date((this||o).expiration_date).toGMTString());(this||o).domain&&t.push("domain="+(this||o).domain);(this||o).path&&t.push("path="+(this||o).path);(this||o).secure&&t.push("secure");(this||o).noscript&&t.push("httponly");return t.join("; ")};e.prototype.toValueString=function toValueString(){return(this||o).name+"="+(this||o).value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;e.prototype.parse=function parse(t){if((this||o)instanceof e){var i=t.split(";"),n=i[0].match(/([^=]+)=((?:.|\n)*)/),r=n[1],s=n[2];(this||o).name=r;(this||o).value=s;for(var a=1;a<i.length;a++){n=i[a].match(/([^=]+)(?:=((?:.|\n)*))?/),r=n[1].trim().toLowerCase(),s=n[2];switch(r){case"httponly":(this||o).noscript=true;break;case"expires":(this||o).expiration_date=s?Number(Date.parse(s)):Infinity;break;case"path":(this||o).path=s?s.trim():"";break;case"domain":(this||o).domain=s?s.trim():"";break;case"secure":(this||o).secure=true;break}}return this||o}return(new e).parse(t)};e.prototype.matches=function matches(t){return!((this||o).noscript&&t.script||(this||o).secure&&!t.secure||!this.collidesWith(t))};e.prototype.collidesWith=function collidesWith(t){if((this||o).path&&!t.path||(this||o).domain&&!t.domain)return false;if((this||o).path&&0!==t.path.indexOf((this||o).path))return false;if((this||o).domain===t.domain)return true;if((this||o).domain&&"."===(this||o).domain.charAt(0)){var e=t.domain.indexOf((this||o).domain.slice(1));if(-1===e||e!==t.domain.length-(this||o).domain.length+1)return false}else if((this||o).domain)return false;return true};n.CookieJar=o.CookieJar=i=function CookieJar(){if((this||o)instanceof CookieJar){var t={};(this||o).setCookie=function setCookie(i){i=e(i);var o=i.expiration_date<=Date.now();if(i.name in t){var n=t[i.name];for(var r=0;r<n.length;r++){var s=n[r];if(s.collidesWith(i)){if(o){n.splice(r,1);0===n.length&&delete t[i.name];return false}return n[r]=i}}if(o)return false;n.push(i);return i}return!o&&(t[i.name]=[i])};(this||o).getCookie=function getCookie(e,i){var o=t[e];for(var n=0;n<o.length;n++){var r=o[n];if(r.expiration_date<=Date.now())0===o.length&&delete t[r.name];else if(r.matches(i))return r}};(this||o).getCookies=function getCookies(e){var i=[];for(var o in t){var n=this.getCookie(o,e);n&&i.push(n)}i.toString=function toString(){return i.join(":")};i.toValueString=function(){return i.map((function(t){return t.toValueString()})).join(";")};return i};return this||o}return new CookieJar};i.prototype.setCookies=function setCookies(t){t=Array.isArray(t)?t:t.split(r);var i=[];for(var o=0;o<t.length;o++){var n=e(t[o]);this.setCookie(n)&&i.push(n)}return i};const s=n.CookieAccessInfo,a=n.Cookie,h=n.CookieJar;export default n;export{a as Cookie,s as CookieAccessInfo,h as CookieJar};

